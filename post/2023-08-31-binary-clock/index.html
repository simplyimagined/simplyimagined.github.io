<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>Building a Clock With Nerves - </title>

  <meta name="description" content="Does anybody really know what time it is?">
  <meta name="author" content="Dan Anderson"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Simply Imagined",
    
    "url": "https:\/\/simplyimagined.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/simplyimagined.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/simplyimagined.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/simplyimagined.github.io\/post\/2023-08-31-binary-clock\/",
          "name": "Building a clock with nerves"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Dan Anderson"
  },
  "headline": "Building a Clock With Nerves",
  "description" : "Them: \u0026ldquo;Hey, what time is it?\u0026rdquo;\nMe: \u0026ldquo;Let me check this clock. Hmm, let\u0026rsquo;s see\u0026hellip; that plus that plus 4\u0026hellip;\u0026rdquo;\nThem: \u0026ldquo;Just glance at the clock and tell me.\u0026rdquo;\nMe: \u0026ldquo;Ok, just a second, the digits changed, let me redo this.\u0026rdquo;\nThem: \u0026ldquo;Seriously, how hard can this\u0026hellip; Oh.\u0026rdquo;\n",
  "inLanguage" : "en",
  "wordCount":  926 ,
  "datePublished" : "2023-08-31T09:36:00",
  "dateModified" : "2023-08-31T09:36:00",
  "image" : "https:\/\/simplyimagined.github.io\/images\/simply_imagined_tree.png",
  "keywords" : [ "nerves, clock, project, hardware, livebook" ],
  "mainEntityOfPage" : "https:\/\/simplyimagined.github.io\/post\/2023-08-31-binary-clock\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/simplyimagined.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/simplyimagined.github.io\/images\/simply_imagined_tree.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Building a Clock With Nerves" />
<meta property="og:description" content="Does anybody really know what time it is?">
<meta property="og:image" content="https://simplyimagined.github.io/images/binary-clock-s.jpeg" />
<meta property="og:url" content="https://simplyimagined.github.io/post/2023-08-31-binary-clock/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Simply Imagined" />

  <meta name="twitter:title" content="Building a Clock With Nerves" />
  <meta name="twitter:description" content="Does anybody really know what time it is?">
  <meta name="twitter:image" content="https://simplyimagined.github.io/images/binary-clock-s.jpeg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="generator" content="Hugo 0.117.0">
  <link rel="alternate" href="https://simplyimagined.github.io/index.xml" type="application/rss+xml" title="Simply Imagined"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="https://simplyimagined.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://simplyimagined.github.io/css/syntax.css" /><link rel="stylesheet" href="https://simplyimagined.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://simplyimagined.github.io">Simply Imagined</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Blog" href="/post/">Blog</a>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">Subtle</a>
              <div class="navlinks-children">
                
                  <a href="/page/subtle/">The Project</a>
                
                  <a href="https://subtle.fly.dev">Let&#39;s Play!</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Simply Imagined" href="https://simplyimagined.github.io">
            <img class="avatar-img" src="https://simplyimagined.github.io/images/simply_imagined_tree.png" alt="Simply Imagined" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  
    <div id="header-big-imgs" data-num-img=1
      
         
          data-img-src-1="/images/verne-telescope-b.png"
         
         data-img-desc-1="Decoding binary digits to tell time"
      ></div>
  

  <header class="header-section has-img">
    
      
      <div class="intro-header big-img" style="background-image: url('/images/verne-telescope-b.png');">
        
        <div class="container">
          <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <div class="post-heading">
                <h1>Building a Clock With Nerves</h1>
                  
                    
                      <h2 class="post-subheading">Does anybody really know what time it is?</h2>
                    
                  
                  
                    <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 31, 2023
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;926&nbsp;words
  
  
  
</span>


                  
              </div>
            </div>
          </div>
        </div>
        <span class="img-desc" style="display: inline;">Decoding binary digits to tell time</span>
      </div>
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Building a Clock With Nerves</h1>
              
              
              
                
                  <h2 class="post-subheading">Does anybody really know what time it is?</h2>
                
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 31, 2023
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;926&nbsp;words
  
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>Them: &ldquo;Hey, what time is it?&rdquo;<br>
Me: &ldquo;Let me check this clock. Hmm, let&rsquo;s see&hellip; that plus that plus 4&hellip;&rdquo;<br>
Them: &ldquo;Just glance at the clock and tell me.&rdquo;<br>
Me: &ldquo;Ok, just a second, the digits changed, let me redo this.&rdquo;<br>
Them: &ldquo;Seriously, how hard can this&hellip; Oh.&rdquo;</p>
<hr>

<figure ><img src="/images/binary-clock.jpeg" alt="my binary clock"></figure>

<hr>
<h3 id="nerves-to-the-rescue">Nerves To the Rescue</h3>
<p>Several years ago I heard about the Nerves project and was captivated by the idea of failsafe firmware upgrades. How often do we see &ldquo;Do not turn off the power until this upgrade completes&rdquo; and shudder? Having lived in Florida, where the power can flicker often due to lightning strikes, this promise resonated.</p>
<p>The other important value Nerves brings to embedded systems is the reliability of Elixir and OTP. I&rsquo;ve built embedded instruments with C. It&rsquo;ll never happen to <em>you</em>, but when the stack gets corrupted from some amazing pointer arithmetic you really hope the reset button is within easy reach. Elixir prevents a lot of these problems and OTP is there to hit reset for you. &ldquo;Have you tried turning it off and on again?&rdquo;</p>
<h3 id="the-book">The Book</h3>
<p>After looking around a bit I settled on <a href="https://pragprog.com/titles/liveview/programming-phoenix-liveview/"><em>Build a Binary Clock With Elixir and Nerves</em></a> by Frank Hunleth and Bruce Tate. The premise of building something useful &ndash; maybe not <em>useful</em>, but certainly enjoyable to look at &ndash; was exciting. The hardware requirements seemed trivial enough, the soldering and woodworking wouldn&rsquo;t be a challenge, so it was time to get started.</p>

<figure ><img src="/images/post-binary-clock-book-500.jpeg" alt="build a binary clock book"></figure>

<p>Did I mention the hardware <em>&ldquo;seemed trivial enough&rdquo;?</em> Oh how naive! In 2022 those cheap Pi Zero boards were still unobtanium. At this point the prudent course was to <em>bravely run away</em> and await a better day.</p>
<h3 id="turning-it-around">Turning It Around</h3>
<p>It was at <a href="https://simplyimagined.github.io/post/2023-05-20-gig-city-elixir/" title="Gig City Elixir">Gig City Elixir</a> this year that I met Frank Hunleth. After introducing myself and explaining my interest in Nerves he asked if I&rsquo;d been able to acquire a Pi board to develop with. He certainly wasn&rsquo;t surprised to hear of my difficulty getting a board, but <em>I</em> was blown away when he reached into a box and handed me a <a href="https://www.tomshardware.com/news/raspberry-pi-alternative-mango-pi-risc-v-sbc">Mango Pi MQ Pro</a>. You can see this board in the picture at the top of this post.</p>
<p><strong>Thank you, Frank!</strong></p>
<p>Returning home from the conference, I used <a href="https://github.com/nerves-livebook/nerves_livebook">Nerves Livebook</a> to bring up the board and look around. Hey, I could connect across the usb cable and blink the leds on the board. Success! It was enough for me to order some more parts and get ready to work on the project. Frank had explained that support for the Mango Pi was still a work in progress but that it should work to do the project in the book. Fortunately, between May and August, when I started on the book, he had already commited a lot of changes to Nerves so that I didn&rsquo;t run into any issues with it not being an actual Pi Zero.</p>
<h3 id="the-project-design">The Project Design</h3>
<p>Look again at the subhead for the book: <em>Use Layering to Produce Better Embedded Systems.</em> That actually made this a much more valuable book than just &ldquo;here&rsquo;s how to twiddle some leds&rdquo;. The layering allows for much easier development, testing, and deployment to hardware by the use of <em>adapter</em> modules for each phase of development.</p>
<p>When developing you want pretty output to understand how things are working. For testing, dependable results help verify correctness. Then it&rsquo;s much easier to deploy and know that the underlying code is good and you only need to work out the interface to hardware. Each of these <em>adapter</em> modules are interchangeable inside the <em>server</em> module that is used with OTP to run the clock.</p>
<h3 id="challenges">Challenges</h3>
<p>Working through the initial stages of the book, you build a small led circuit and attach it to a GPIO pin on the Pi board. This allows understanding of the circuit, how to use the GPIO library to control the pin, and get a small win. In my case, the pin numbers for the Pi hardware didn&rsquo;t match up with the Mango Pi. Fortunately, <a href="https://worldbeyondlinux.be/posts/gpio-on-the-mango-pi/">GPIO on the MangoPi MQ-Pro</a> and the excellent <a href="https://pinout.xyz">Raspberry Pi Pinout</a> website were excellent resources that enabled me to continue.</p>
<p>Without a lot of hardware knowledge I struggled to understand exactly what search terms I needed so that I could find some of the parts. I never did find the ribbon cables Frank was using in the book, but I did finally learn that <em>&ldquo;Dupont Connector&rdquo;</em> did what I needed. As he explains in the book, the ribbon cable helps keep the wires under control, but I fixed this with zip ties and colored electrical tape. In the future I&rsquo;d love to learn what cable to get; when I do I&rsquo;ll feel silly that it was so simple.</p>
<p>If you&rsquo;ve never soldered before, it may seem daunting, but there are plenty of <em>howtos</em> on YouTube. Honestly, the only challenge with the soldering was <em>how much</em> there was to do &ndash; an endless, mind numbing amount. I thought I&rsquo;d never finish, but once you get started you get into a rhythm and eventually find yourself on the other end of the task.</p>
<h3 id="conclusion">Conclusion</h3>
<p>I&rsquo;m extremely grateful to Frank Hunleth for making this possible. Without his gift of the Mango Pi I&rsquo;d still be waiting on hardware. The book was a good introduction to Nerves and <em>&ldquo;use layering to produce better embedded systems&rdquo;</em> is perfect advice and a great software architecture.</p>
<hr>
<blockquote>
<p>If you&rsquo;ve ever viewed any of Bruce&rsquo;s recent training videos and wondered what was on the bookshelf in the background, now you know. And now I have one, too!</p>
</blockquote>

        
          <div class="blog-tags">
            
              <a href="https://simplyimagined.github.io/tags/nerves/">nerves</a>&nbsp;
            
              <a href="https://simplyimagined.github.io/tags/clock/">clock</a>&nbsp;
            
              <a href="https://simplyimagined.github.io/tags/project/">project</a>&nbsp;
            
              <a href="https://simplyimagined.github.io/tags/hardware/">hardware</a>&nbsp;
            
              <a href="https://simplyimagined.github.io/tags/livebook/">livebook</a>&nbsp;
            
          </div>
        

        

        
          

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://simplyimagined.github.io/post/2023-08--01-puzzle/" data-toggle="tooltip" data-placement="top" title="Designing the Puzzle Component">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://simplyimagined.github.io/post/2023-09-03-debugging-subtle/" data-toggle="tooltip" data-placement="top" title="Finding the Fix">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="simplyimagined.com">Dan Anderson</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2023
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://simplyimagined.github.io">Simply Imagined</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.117.0</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="https://simplyimagined.github.io/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://simplyimagined.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

